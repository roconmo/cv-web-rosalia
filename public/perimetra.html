<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perimetra</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f4ff;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }
        .logo {
            background: #1e3a8a;
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }
        h1 {
            margin: 0;
            font-size: 32px;
        }
        h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 24px;
        }
        p {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }
        button {
            width: 100%;
            padding: 20px;
            font-size: 20px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 10px;
        }
        .btn-blue {
            background: #1e3a8a;
            color: white;
        }
        .btn-blue:hover {
            background: #1e40af;
        }
        .btn-green {
            background: #16a34a;
            color: white;
        }
        .btn-green:hover {
            background: #15803d;
        }
        .btn-red {
            background: #dc2626;
            color: white;
        }
        .btn-red:hover {
            background: #b91c1c;
        }
        .location {
            background: white;
            border: 2px solid #e5e7eb;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 18px;
            font-weight: bold;
        }
        .counter {
            background: #eff6ff;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        .counter-time {
            font-size: 40px;
            font-weight: bold;
            color: #1e3a8a;
            margin: 10px 0;
        }
        .status {
            background: #dcfce7;
            color: #166534;
            padding: 8px 15px;
            border-radius: 15px;
            display: inline-block;
            margin-bottom: 15px;
            font-size: 14px;
            font-weight: bold;
        }
        .hidden {
            display: none;
        }
        .icon-box {
            width: 80px;
            height: 80px;
            background: #dbeafe;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }
        .small-text {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <!-- PANTALLA 1: ONBOARDING -->
    <div id="pantallaOnboarding" class="container">
        <div class="logo">
            <h1>PERIMETRA</h1>
            <p style="color: white; margin: 10px 0 0 0; font-size: 14px;">Control de jornada laboral</p>
        </div>
        <h2>Registra tu jornada laboral de forma simple</h2>
        <p>Inicia y finaliza tu jornada con un solo bot√≥n</p>
        <button class="btn-blue" onclick="irAPermisos()">Comenzar</button>
    </div>

    <!-- PANTALLA 2: PERMISOS -->
    <div id="pantallaPermisos" class="container hidden">
        <div class="icon-box">
            <svg width="40" height="40" fill="none" stroke="#1e3a8a" stroke-width="2" viewBox="0 0 24 24">
                <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
        </div>
        <h2>Perimetra necesita acceso a tu ubicaci√≥n</h2>
        <p>Para detectar autom√°ticamente si est√°s en la Oficina o en Casa</p>
        <button class="btn-blue" onclick="irADashboard()">Permitir acceso a ubicaci√≥n</button>
        <p class="small-text">La app detectar√° autom√°ticamente cuando est√©s en la Oficina o en Casa</p>
    </div>

    <!-- PANTALLA 3: DASHBOARD -->
    <div id="pantallaDashboard" class="container hidden">
        <div class="logo">
            <h1>PERIMETRA</h1>
        </div>

        <div class="location" id="locationDisplay">üìç En Oficina</div>

        <p id="statusText" style="color: #999; font-size: 18px;">No hay jornada activa</p>

        <div id="workingInfo" class="hidden">
            <span class="status">Jornada en curso</span>
            <p style="color: #666; font-size: 14px; margin: 5px 0;">Iniciaste a las</p>
            <p id="startTimeDisplay" style="font-size: 24px; font-weight: bold; color: #333; margin: 10px 0 20px;">--:--</p>

            <div class="counter">
                <p class="counter-time" id="counterDisplay">0h 0min 0seg</p>
                <p style="color: #666; margin: 0;">Tiempo trabajado</p>
            </div>
        </div>

        <button id="startBtn" class="btn-green" onclick="iniciarJornada()">‚ñ∂ INICIAR JORNADA</button>
        <button id="endBtn" class="btn-red hidden" onclick="finalizarJornada()">‚ñ† FINALIZAR JORNADA</button>

        <p id="currentTime" style="color: #999; font-size: 14px; margin-top: 15px;">--:--</p>
    </div>

    <script>
        var trabajando = false;
        var horaInicio = null;
        var segundos = 0;
        var intervalo = null;
        var miUbicacion = Math.random() > 0.5 ? 'En Oficina' : 'En Casa';

        // Funciones de navegaci√≥n entre pantallas
        function irAPermisos() {
            document.getElementById('pantallaOnboarding').className = 'container hidden';
            document.getElementById('pantallaPermisos').className = 'container';
        }

        function irADashboard() {
            document.getElementById('pantallaPermisos').className = 'container hidden';
            document.getElementById('pantallaDashboard').className = 'container';
            document.getElementById('locationDisplay').textContent = 'üìç ' + miUbicacion;
            actualizarHoraActual();
        }

        // Funciones de la jornada laboral
        function obtenerHora() {
            var ahora = new Date();
            var h = ahora.getHours();
            var m = ahora.getMinutes();
            if (h < 10) h = '0' + h;
            if (m < 10) m = '0' + m;
            return h + ':' + m;
        }

        function formatearTiempo(seg) {
            var h = Math.floor(seg / 3600);
            var m = Math.floor((seg % 3600) / 60);
            var s = seg % 60;
            return h + 'h ' + m + 'min ' + s + 'seg';
        }

        function actualizarHoraActual() {
            document.getElementById('currentTime').textContent = obtenerHora();
        }

        function iniciarJornada() {
            if (confirm('¬øIniciar jornada?\n\nHora: ' + obtenerHora() + '\nUbicaci√≥n: ' + miUbicacion)) {
                trabajando = true;
                horaInicio = new Date();
                segundos = 0;

                document.getElementById('statusText').className = 'hidden';
                document.getElementById('workingInfo').className = '';
                document.getElementById('startBtn').className = 'btn-green hidden';
                document.getElementById('endBtn').className = 'btn-red';
                document.getElementById('startTimeDisplay').textContent = obtenerHora();

                intervalo = setInterval(function() {
                    segundos++;
                    document.getElementById('counterDisplay').textContent = formatearTiempo(segundos);
                }, 1000);
            }
        }

        function finalizarJornada() {
            var horaInicioStr = horaInicio.getHours();
            var minInicioStr = horaInicio.getMinutes();
            if (horaInicioStr < 10) horaInicioStr = '0' + horaInicioStr;
            if (minInicioStr < 10) minInicioStr = '0' + minInicioStr;

            if (confirm('¬øFinalizar jornada?\n\nInicio: ' + horaInicioStr + ':' + minInicioStr + '\nFin: ' + obtenerHora() + '\nTotal: ' + formatearTiempo(segundos))) {
                trabajando = false;
                clearInterval(intervalo);

                alert('Jornada finalizada\n\nTiempo total: ' + formatearTiempo(segundos) + '\nUbicaci√≥n: ' + miUbicacion);

                document.getElementById('statusText').className = '';
                document.getElementById('workingInfo').className = 'hidden';
                document.getElementById('startBtn').className = 'btn-green';
                document.getElementById('endBtn').className = 'btn-red hidden';

                horaInicio = null;
                segundos = 0;
            }
        }

        // Actualizar hora actual cada segundo (solo cuando estemos en el dashboard)
        setInterval(function() {
            if (document.getElementById('pantallaDashboard').className === 'container') {
                actualizarHoraActual();
            }
        }, 1000);
    </script>
</body>
</html>